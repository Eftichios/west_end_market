{% extends 'west_end_market/base.html' %}
{% load staticfiles %}

{% block title_block %}
    Create Listing
{% endblock %}

{% block body_block %}
<div class="container margin-top-30">
    <form id="listing_form" method = 'post' enctype="multipart/form-data" action="{% url 'add_listing' %}">
        {% csrf_token %}
        <div class="row">
            <div class="col-md-4">
                <h3>Create a Listing</h3>
                        
                <div class="text-center">
                    <img id="id_placeholder" class="img-thumbnail"  src="{% static 'images/placeholder.jpg' %}" alt="image of the item" width=200 height=200>
                </div>
                        
                <div class="form-group text-center font-weight-bold ">
                    <label>Upload Image</label>
                    <input required id="id_picture" type="file" name="picture" onchange="readURL(this);">
                    <br>
                    <p class="text-left helptext">Only png and jpg allowed</p>
                </div>
            </div>
                    
            <div class="col-md-8">
                <div class="form-group font-weight-bold">
                    <label>Title of item:</label>
                    <input required id="id_title" type="text" class="form-control font-italic" placeholder="Add Title (i.e bicycle)" name="title">
                </div>
                <div class="form-group font-weight-bold">
                    <label>Price:</label>
                    <input required id="id_price" type="text" class="form-control font-italic" placeholder="Add Price" name="price">
                </div>
                <div class="form-group font-weight-bold">
                    <label>Category:</label>

                    <select required id="id_category" class="form-control text-capitalize" name="category">
                        {{form.category.1}}
                        {{form.category.2}}
                    </select>
                </div>
                <div class="form-group font-weight-bold">
                    <label>Postcode:</label>
                    <input required id="id_postcode" type="text" class="form-control font-italic" placeholder="Add Postcode (i.e G11 6QH)" name="postcode">
                </div>
                <div class="form-group font-weight-bold">
                    <label>Description:</label>
                    <textarea required id="id_description" class="form-control font-italic" placeholder="Add description" name="description"></textarea>
                </div>
                        
                <div class="text-right">
                    <button class="btn btn-primary block-button" type="submit" value="submit" >Create</button>
                    <button class="btn btn-outline-secondary" type="submit" value="submit" disabled>Update</button>
                </div>
            </div>
        </div>       
    </form>    
</div>
<script type="text/javascript">
//previews the photo before upload, called when picture is selected
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function(e) {
            $('#id_placeholder').attr({'src': e.target.result});
        }

    reader.readAsDataURL(input.files[0]);
  }
}

</script>
{% endblock %}

        
        
        
        
